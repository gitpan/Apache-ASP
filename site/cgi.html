

<html>
<head>
<title>Apache :: ASP :: CGI [ apache + asp + perl = apache::asp ]</title>



</head>
<body bgcolor=black link=#003090 alink=#ff5599 vlink=#993399>

<table border=0 cellpadding=5 cellspacing=0 height=95% width=100%>
<tr bgcolor=#ff4488>
<td colspan=2>
	<table border=0 cellpadding=0 cellspacing=0 width=100%>
	<tr>
	<td><img border=0 src=apache_asp.gif alt="Apache :: ASP"></td>	
	
		<td align=right></td>
	
	</tr>
	</table>
</td>
</tr>

<tr>

<td valign=top bgcolor=#c0c0c0>
	<table border=0 cellpadding=0 cellspacing=2 width=100>
	<tr><td align=center colspan=2><hr size=1></td></tr>

	
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=index.html><font face=verdana size=-1 color=#003090><nobr>INTRO</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=install.html><font face=verdana size=-1 color=#003090><nobr>INSTALL</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=config.html><font face=verdana size=-1 color=#003090><nobr>CONFIG</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=syntax.html><font face=verdana size=-1 color=#003090><nobr>SYNTAX</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=events.html><font face=verdana size=-1 color=#003090><nobr>EVENTS</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=objects.html><font face=verdana size=-1 color=#003090><nobr>OBJECTS</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=ssi.html><font face=verdana size=-1 color=#003090><nobr>SSI</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>-</b></font></td>
		<td><a href=cgi.html><font face=verdana size=-1 color=#003090><nobr>CGI</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=perlscript.html><font face=verdana size=-1 color=#003090><nobr>PERLSCRIPT</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=cookies.html><font face=verdana size=-1 color=#003090><nobr>COOKIES</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=faq.html><font face=verdana size=-1 color=#003090><nobr>FAQ</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=tuning.html><font face=verdana size=-1 color=#003090><nobr>TUNING</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=kudos.html><font face=verdana size=-1 color=#003090><nobr>CREDITS</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=support.html><font face=verdana size=-1 color=#003090><nobr>SUPPORT</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=sites.html><font face=verdana size=-1 color=#003090><nobr>SITES USING</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=todo.html><font face=verdana size=-1 color=#003090><nobr>TODO</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=changes.html><font face=verdana size=-1 color=#003090><nobr>CHANGES</nobr></font></a></td>
		</tr>
		<tr><td colspan=2><hr size=1></td></tr>
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=eg/index.html><font face=verdana size=-1 color=#003090><nobr>EXAMPLES</nobr></font></a></td>
		</tr>
		
	<tr>
		<td align=center colspan=2>
		<hr size=1>
		<a href=http://perl.apache.org><img 
			src=powered_by_modperl.gif border=0
			alt="Powered by ModPerl & Apache"
			></a>
		<br>
		<a href=http://www.nodeworks.com/asp/><img 
			src=powered_by_apache_asp.jpg border=0
			alt="Powered by Apache::ASP"
			></a>
		<hr size=1>
		</td>
	</tr>
	</table>
</td>

<td valign=top bgcolor=white>
	<font size=-1 face=verdana>
	
<font face=verdana><font size=+1 color=#555555><b>CGI</b></font><p>
<font face="lucida console,courier new" size=3><pre>
</pre></font><a href=cgi.html>CGI</a> has been the standard way of deploying web applications long before
ASP came along.  <a href=cgi.html>CGI</a>.pm is a very useful module that aids developers in 
the building of these applications, and Apache::ASP has been made to 
be compatible with function calls in <a href=cgi.html>CGI</a>.pm.  Please see cgi.htm in the 
./site/eg directory for a sample ASP script written almost entirely in <a href=cgi.html>CGI</a>.
<font face="lucida console,courier new" size=3><pre>
</pre></font>As of version 0.09, use of <a href=cgi.html>CGI</a>.pm for both input and output is seamless
when working under Apache::ASP.  Thus if you would like to port existing
cgi scripts over to Apache::ASP, all you need to do is wrap &lt;% %&gt; around
the script to get going.  This functionality has been implemented so that
developers may have the best of both worlds when building their 
web applications.
<font face="lucida console,courier new" size=3><pre>
</pre></font>Following are some special notes with respect to compatibility with <a href=cgi.html>CGI</a>.
Use of <a href=cgi.html>CGI</a>.pm in any of these ways was made possible through a great
amount of work, and is not guaranteed to be portable with other perl ASP
implementations, as other ASP implementations will likely be more limited.</font>

	<hr size=1>
	<table width=100% border=0 cellpadding=3 cellspacing=0>
	<tr>
	<td valign=top><font face="lucida console" size=-1>
	<ul>
	
		<tr>
		
			<td valign=top >
			<font face="lucida console" size=-1>
			<a href=#Query%20Object%20Initialization><font color=#003090>Query Object Initialization</font></a>
			</font>
			</td>
		
			<td valign=top >
			<font face="lucida console" size=-1>
			<a href=#print%28%29ing%20CGI><font color=#003090>print()ing CGI</font></a>
			</font>
			</td>
							
		</tr>
		
		<tr>
		
			<td valign=top >
			<font face="lucida console" size=-1>
			<a href=#CGI%20headers><font color=#003090>CGI headers</font></a>
			</font>
			</td>
		
			<td valign=top >
			<font face="lucida console" size=-1>
			<a href=#File%20Upload><font color=#003090>File Upload</font></a>
			</font>
			</td>
							
		</tr>
			
	</table>
	<hr size=1>
	<p>

	<p>
	<a name=Query%20Object%20Initialization></a>
	<font face=verdana><font size=+0 color=#555555><b>Query Object Initialization</b></font><p>
<font face="lucida console,courier new" size=3><pre>
</pre></font>You may create a <a href=cgi.html>CGI</a>.pm $query object like so:
<font face="lucida console,courier new" size=3><pre>
	use <a href=cgi.html>CGI</a>;
	my $query = new <a href=cgi.html>CGI</a>;
</pre></font>As of Apache::ASP version 0.09, form input may be read in 
by <a href=cgi.html>CGI</a>.pm upon initialization.  Before, Apache::ASP would 
consume the form input when reading into $Request-&gt;Form(), 
but now form input is cached, and may be used by <a href=cgi.html>CGI</a>.pm input
routines.</font>
	
	<p>
	<a name=CGI%20headers></a>
	<font face=verdana><font size=+0 color=#555555><b>CGI headers</b></font><p>
<font face="lucida console,courier new" size=3><pre>
</pre></font>Not only can you use the <a href=cgi.html>CGI</a>.pm $query-&gt;header() method
to put out headers, but with the CgiHeaders config option
set to true, you can also print &quot;Header: value\n&quot;, and add 
similar lines to the top of your script, like:
<font face="lucida console,courier new" size=3><pre>
 Some-Header: Value
 Some-Other: OtherValue

 &lt;html&gt;&lt;body&gt; Script body starts here.
</pre></font>Once there are no longer any cgi style headers, or the 
there is a newline, the body of the script begins. So
if you just had an asp script like:
<font face="lucida console,courier new" size=3><pre>
    print join(&quot;:&quot;, %{$Request-&gt;QueryString});
</pre></font>You would likely end up with no output, as that line is
interpreted as a header because of the semicolon.  When doing
basic debugging, as long as you start the page with &lt;html&gt;
you will avoid this problem.</font>
	
	<p>
	<a name=print%28%29ing%20CGI></a>
	<font face=verdana><font size=+0 color=#555555><b>print()ing CGI</b></font><p>
<font face="lucida console,courier new" size=3><pre>
</pre></font><a href=cgi.html>CGI</a> is notorious for its print() statements, and the functions in <a href=cgi.html>CGI</a>.pm 
usually return strings to print().  You can do this under Apache::ASP,
since print just aliases to $Response-&gt;Write().  Note that $| has no
affect.
<font face="lucida console,courier new" size=3><pre>
	print $query-&gt;header();
	print $query-&gt;start_form(); </pre></font>
	
	<p>
	<a name=File%20Upload></a>
	<font face=verdana><font size=+0 color=#555555><b>File Upload</b></font><p>
<font face="lucida console,courier new" size=3><pre>
</pre></font><a href=cgi.html>CGI</a>.pm is used for implementing reading the input from file upload.  You
may create the file upload form however you wish, and then the 
data may be recovered from the file upload by using $Request-&gt;Form().
Data from a file upload gets written to a file handle, that may in
turn be read from.  The original file name that was uploaded is the 
name of the file handle.
<font face="lucida console,courier new" size=3><pre>
	my $filehandle = $Request-&gt;Form('file_upload_field_name');
	print $filehandle; # will get you the file name
	my $data;
	while(read($filehandle, $data, 1024)) {
		# data from the uploaded file read into $data
	};
</pre></font>Please see the docs on <a href=cgi.html>CGI</a>.pm (try perldoc <a href=cgi.html>CGI</a>) for more information
on this topic, and <a href=eg/file_upload.asp>./site/eg/file_upload.asp</a> for an example of its use.
<font face="lucida console,courier new" size=3><pre>
</pre></font>There is a $Request-&gt;FileUpload() API extension that you can use to get 
more data about a file upload, so that the following properties are
available for querying:
<font face="lucida console,courier new" size=3><pre>
  my $file_upload = $Request-&gt;{FileUpload}{upload_field};
  $file_upload-&gt;{BrowserFile}
  $file_upload-&gt;{FileHandle}
  $file_upload-&gt;{ContentType}

  # only if FileUploadTemp is set
  $file_upload-&gt;{TempFile}

  # whatever mime headers are sent with the file upload
  # just &quot;keys %$file_upload&quot; to find out
  $file_upload-&gt;{?Mime-Header?}
</pre></font>Please see the $Request section in <a href=objects.html>OBJECTS</a> for more information.</font>
	

</font>
</td>
</tr>
<tr bgcolor=#555555>
	<td colspan=2 align=center width=80%>
	<font face=verdana color=white size=-1>
	Copyright &copy; 1998-2000, Joshua Chamas, 
	<a href=http://www.chamas.com><font color=white>Chamas Enterprises Inc.</font></a>
	</font>
	</td>
</tr>
</table>
</body>
</html>
