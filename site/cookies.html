

<html>
<head>
<title>Apache :: ASP :: COOKIES [ apache + asp + perl = apache::asp ]</title>



</head>
<body bgcolor=black link=#003090 alink=#ff5599 vlink=#993399>

<table border=0 cellpadding=5 cellspacing=0 height=95% width=100%>
<tr bgcolor=#ff4488>
<td colspan=2>
	<table border=0 cellpadding=0 cellspacing=0 width=100%>
	<tr>
	<td><img border=0 src=apache_asp.gif alt="Apache :: ASP"></td>	
	
		<td align=right></td>
	
	</tr>
	</table>
</td>
</tr>

<tr>

<td valign=top bgcolor=#c0c0c0>
	<table border=0 cellpadding=0 cellspacing=2 width=100>
	<tr><td align=center colspan=2><hr size=1></td></tr>

	
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=index.html><font face=verdana size=-1 color=#003090><nobr>INTRO</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=install.html><font face=verdana size=-1 color=#003090><nobr>INSTALL</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=config.html><font face=verdana size=-1 color=#003090><nobr>CONFIG</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=syntax.html><font face=verdana size=-1 color=#003090><nobr>SYNTAX</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=events.html><font face=verdana size=-1 color=#003090><nobr>EVENTS</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=objects.html><font face=verdana size=-1 color=#003090><nobr>OBJECTS</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=ssi.html><font face=verdana size=-1 color=#003090><nobr>SSI</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=cgi.html><font face=verdana size=-1 color=#003090><nobr>CGI</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=perlscript.html><font face=verdana size=-1 color=#003090><nobr>PERLSCRIPT</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>-</b></font></td>
		<td><a href=cookies.html><font face=verdana size=-1 color=#003090><nobr>COOKIES</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=faq.html><font face=verdana size=-1 color=#003090><nobr>FAQ</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=tuning.html><font face=verdana size=-1 color=#003090><nobr>TUNING</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=kudos.html><font face=verdana size=-1 color=#003090><nobr>CREDITS</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=support.html><font face=verdana size=-1 color=#003090><nobr>SUPPORT</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=sites.html><font face=verdana size=-1 color=#003090><nobr>SITES USING</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=todo.html><font face=verdana size=-1 color=#003090><nobr>TODO</nobr></font></a></td>
		</tr>
		
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=changes.html><font face=verdana size=-1 color=#003090><nobr>CHANGES</nobr></font></a></td>
		</tr>
		<tr><td colspan=2><hr size=1></td></tr>
		<tr>
		<td><font size=2 face="courier new"><b>&nbsp;</b></font></td>
		<td><a href=eg/index.html><font face=verdana size=-1 color=#003090><nobr>EXAMPLES</nobr></font></a></td>
		</tr>
		
	<tr>
		<td align=center colspan=2>
		<hr size=1>
		<a href=http://perl.apache.org><img 
			src=powered_by_modperl.gif border=0
			alt="Powered by ModPerl & Apache"
			></a>
		<br>
		<a href=http://www.nodeworks.com/asp/><img 
			src=powered_by_apache_asp.jpg border=0
			alt="Powered by Apache::ASP"
			></a>
		<hr size=1>
		</td>
	</tr>
	</table>
</td>

<td valign=top bgcolor=white>
	<font size=-1 face=verdana>
	
<font face=verdana><font size=+1 color=#555555><b>COOKIES</b></font><p>
<font face="lucida console,courier new" size=3><pre>
</pre></font>Cookies are used by default for user $Session support ( see <a href=objects.html>OBJECTS</a> ).  
In order to track a web user and associate server side data 
with that client, the web server sets, and the web client returns 
a 32 byte session id identifier cookie.  This implementation 
is very secure and  may be used in secure HTTPS transactions, 
and made stronger with SecureSession and ParanoidSession 
settings (see <a href=config.html>CONFIG</a> ).
<font face="lucida console,courier new" size=3><pre>
</pre></font>However good cookies are for this kind of persistent
state management between HTTP requests, they have long 
been under fire for security risks associated with
JavaScript security exploits and privacy abuse by 
large data tracking companies. 
<font face="lucida console,courier new" size=3><pre>
</pre></font>Because of these reasons, web users will sometimes turn off
their cookies, rendering normal ASP session implementations
powerless, resulting in a new $Session generated every request.
This is not good for ASP style sessions.</font>
	<p>
	<a name=Cookieless%20Sessions></a>
	<font face=verdana><font size=+0 color=#555555><b>Cookieless Sessions</b></font><p>
<font face="lucida console,courier new" size=3><pre>
 *** See WARNING Below ***
</pre></font>So we now have more ways to track sessions with the 
SessionQuery* <a href=config.html>CONFIG</a> settings, that allow a web developer 
to embed the session id in URL query strings when use 
of cookies is denied.  The implementations work such that
if a user has cookies turned on, then cookies will be 
used, but for those users with cookies turned off,
the session ids will be parsed into document URLs.
<font face="lucida console,courier new" size=3><pre>
</pre></font>The first and easiest method that a web developer may use 
to implement cookieless sessions are with SessionQueryParse*
directives which enable Apache::ASP to the parse the session id
into document URLs on the fly.  Because this is resource
inefficient, there is also the SessionQuery* directives
that may be used with the $Server-&gt;URL($url,\%params) method to 
generate custom URLs with the session id in its query string.
<font face="lucida console,courier new" size=3><pre>
</pre></font>To see an example of these cookieless sessions in action, 
check out the <a href=eg/cookieless_session.asp>./site/eg/cookieless_session.asp</a> example.
<font face="lucida console,courier new" size=3><pre>
 *** WARNING ***
</pre></font>If you do use these methods, then be VERY CAREFUL
of linking offsite from a page that was accessed with a 
session id in a query string.  This is because this session
id will show up in the HTTP_REFERER logs of the linked to 
site, and a malicious hacker could use this information to
compromise the security of your site's $Sessions, even if 
these are run under a secure web server.  
<font face="lucida console,courier new" size=3><pre>
</pre></font>In order to shake a session id off an HTTP_REFERER for a link 
taking a user offsite, you must point that link to a redirect 
page that will redirect a user, like so:
<font face="lucida console,courier new" size=3><pre>
 &lt;%
    # &quot;cross site scripting bug&quot; prevention
    my $sanitized_url =
	$Server-&gt;HTMLEncode($Response-&gt;QueryString('OffSiteUrl'));
 %&gt;
 &lt;html&gt;
 &lt;head&gt;
 &lt;meta http-equiv=refresh content='0;URL=&lt;%=$sanitized_url%&gt;'&gt;
 &lt;/head&gt;
 &lt;body&gt;
	Redirecting you offsite to
	&lt;a href=&lt;%=$sanitized_url%&gt; &gt;here&lt;/a&gt;...
 &lt;/body&gt;
 &lt;/html&gt;
</pre></font>Because the web browser visits a real page before being redirected
with the &lt;meta&gt; tag, the HTTP_REFERER will be set to this page.
Just be sure to not link to this page with a session id in its
query string.  
<font face="lucida console,courier new" size=3><pre>
</pre></font>Unfortunately a simple $Response-&gt;Redirect() will not work here,
because the web browser will keep the HTTP_REFERER of the 
original web page if only a normal redirect is used.</font>
	

</font>
</td>
</tr>
<tr bgcolor=#555555>
	<td colspan=2 align=center width=80%>
	<font face=verdana color=white size=-1>
	Copyright &copy; 1998-2000, Joshua Chamas, 
	<a href=http://www.chamas.com><font color=white>Chamas Enterprises Inc.</font></a>
	</font>
	</td>
</tr>
</table>
</body>
</html>
